!function(t){function e(e,n,s){var o=this;return this.on("click.pjax",e,function(e){var r=t.extend({},c(n,s));r.container||(r.container=t(this).attr("data-pjax")||o),i(e,r)})}function i(e,i,n){n=c(i,n);var o=e.currentTarget;if("A"!==o.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==o.protocol||location.host!==o.host||o.hash&&o.href.replace(o.hash,"")===location.href.replace(location.hash,"")||o.href===location.href+"#")){var r={url:o.href,container:t(o).attr("data-pjax"),target:o,fragment:null};s(t.extend({},r,n)),e.preventDefault()}}function n(e,i,n){n=c(i,n);var o=e.currentTarget;if("FORM"!==o.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var r={type:o.method,url:o.action,data:t(o).serializeArray(),container:t(o).attr("data-pjax"),target:o,fragment:null};s(t.extend({},r,n)),e.preventDefault()}function s(e){function i(e,i){var s=t.Event(e,{relatedTarget:n});return a.trigger(s,i),!s.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,s.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var n=e.target,o=d(e.url).hash,a=e.context=p(e.container);e.data||(e.data={}),e.data._pjax=a.selector;var l;e.beforeSend=function(t,n){"GET"!==n.type&&(n.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",a.selector);return!!i("pjax:beforeSend",[t,n])&&(n.timeout>0&&(l=setTimeout(function(){i("pjax:timeout",[t,e])&&t.abort("timeout")},n.timeout),n.timeout=0),void(e.requestUrl=d(n.url).href))},e.complete=function(t,n){l&&clearTimeout(l),i("pjax:complete",[t,n,e]),i("pjax:end",[t,e])},e.error=function(t,n,s){var o=m("",t,e),a=i("pjax:error",[t,n,s,e]);"GET"==e.type&&"abort"!==n&&a&&r(o.url)},e.success=function(n,l,u){var c=m(n,u,e);if(!c.contents)return void r(c.url);if(s.state={id:e.id||h(),url:c.url,title:c.title,container:a.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(s.state,c.title,c.url),c.title&&(document.title=c.title),a.html(c.contents),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),(e.replace||e.push)&&window._gaq&&_gaq.push(["_trackPageview"]),""!==o){var p=d(c.url);p.hash=o,s.state.url=p.href,window.history.replaceState(s.state,c.title,p.href);var f=t(p.hash);f.length&&t(window).scrollTop(f.offset().top)}i("pjax:success",[n,l,u,e])},s.state||(s.state={id:h(),url:window.location.href,title:document.title,container:a.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(s.state,document.title));var c=s.xhr;c&&c.readyState<4&&(c.onreadystatechange=t.noop,c.abort()),s.options=e;var c=s.xhr=t.ajax(e);return c.readyState>0&&(e.push&&!e.replace&&(g(s.state.id,a.clone().contents()),window.history.pushState(null,"",u(e.requestUrl))),i("pjax:start",[c,e]),i("pjax:send",[c,e])),s.xhr}function o(e,i){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return s(t.extend(n,c(e,i)))}function r(t){window.history.replaceState(null,"","#"),window.location.replace(t)}function a(e){var i=e.state;if(i&&i.container){var n=t(i.container);if(n.length){var o=w[i.id];if(!s.state)return void(s.state=i);var a=s.state.id<i.id?"forward":"back";v(a,s.state.id,n.clone().contents());var l=t.Event("pjax:popstate",{state:i,direction:a});n.trigger(l);var h={id:i.id,url:i.url,container:n,push:!1,fragment:i.fragment,timeout:i.timeout,scrollTo:!1};o?(n.trigger("pjax:start",[null,h]),i.title&&(document.title=i.title),n.html(o),s.state=i,n.trigger("pjax:end",[null,h])):s(h),n[0].offsetHeight}else r(location.href)}}function l(e){var i=t.isFunction(e.url)?e.url():e.url,n=e.type?e.type.toUpperCase():"GET",s=t("<form>",{method:"GET"===n?"GET":"POST",action:i,style:"display:none"});"GET"!==n&&"POST"!==n&&s.append(t("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var o=e.data;if("string"==typeof o)t.each(o.split("&"),function(e,i){var n=i.split("=");s.append(t("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if("object"==typeof o)for(key in o)s.append(t("<input>",{type:"hidden",name:key,value:o[key]}));t(document.body).append(s),s.submit()}function h(){return(new Date).getTime()}function u(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function d(t){var e=document.createElement("a");return e.href=t,e}function c(e,i){return e&&i?i.container=e:i=t.isPlainObject(e)?e:{container:e},i.container&&(i.container=p(i.container)),i}function p(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function f(t,e){return t.filter(e).add(t.find(e))}function m(e,i,n){var s={};if(s.url=u(i.getResponseHeader("X-PJAX-URL")||n.requestUrl),/<html/i.test(e))var o=t(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0]),r=t(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]);else var o=r=t(e);if(0===r.length)return s;if(s.title=f(o,"title").last().text(),n.fragment){if("body"===n.fragment)var a=r;else var a=f(r,n.fragment).first();a.length&&(s.contents=a.contents(),s.title||(s.title=a.attr("title")||a.data("title")))}else/<html/i.test(e)||(s.contents=r);return s.contents&&(s.contents=s.contents.not("title"),s.contents.find("title").remove()),s.title&&(s.title=t.trim(s.title)),s}function g(t,e){for(w[t]=e,x.push(t);_.length;)delete w[_.shift()];for(;x.length>s.defaults.maxCacheLength;)delete w[x.shift()]}function v(t,e,i){var n,s;w[e]=i,"forward"===t?(n=x,s=_):(n=_,s=x),n.push(e),(e=s.pop())&&delete w[e]}function y(){t.fn.pjax=e,t.pjax=s,t.pjax.enable=t.noop,t.pjax.disable=b,t.pjax.click=i,t.pjax.submit=n,t.pjax.reload=o,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20},t(window).bind("popstate.pjax",a)}function b(){t.fn.pjax=function(){return this},t.pjax=l,t.pjax.enable=y,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).unbind("popstate.pjax",a)}var w={},_=[],x=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),t.support.pjax?y():b()}(jQuery);